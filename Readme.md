# img_resizer

指定した画像ファイルやフォルダ内の画像を、一括でパーセンテージ指定によりリサイズするPythonツールです。フォルダを指定した場合、オプションを指定することでサブフォルダを再帰的に処理することも可能です。

## 特徴

*   **一括リサイズ**: 複数のファイルやフォルダをまとめて指定可能
*   **再帰処理対応**: `--recursive` オプションでサブフォルダ内の画像も全て探索
*   **簡単指定**: 縮小率をパーセントで指定（例: 50%）
*   **非破壊**: 元ファイルは上書きせず、プレフィックス（接頭辞）を付けた別名ファイルとして保存
*   **高品質**:
    *   Lanczosフィルタによる高品質リサンプル
    *   EXIF情報の向き（回転）を自動補正
    *   主要なメタデータ（EXIF, ICCプロファイル）を維持
*   **広範なフォーマット**: JPEG, PNG, GIF, BMP, TIFF, WebP に対応
*   **アニメーションGIF対応**: アニメーションを維持したままリサイズが可能

## 動作環境

*   Python 3.8 以上推奨
*   Pillow ライブラリ

### インストール

必要なライブラリをインストールしてください。

```bash
pip install pillow
```

## 使い方

基本構文:
`python img_resizer.py [対象ファイル/フォルダ...] [オプション]`

### 使用例

#### 1. 単一のファイルを 30% に縮小する
```bash
python img_resizer.py photo.jpg -p 30
# 出力: resized_photo.jpg
```

#### 2. 複数のファイルを 80% にし、プレフィックスを "small_" にする
```bash
python img_resizer.py image1.png image2.webp -p 80 -o small_
# 出力: small_image1.png, small_image2.webp
```

#### 3. フォルダ内の画像を 50%（デフォルト）に縮小
```bash
python img_resizer.py ./images
# ./images 直下の画像のみ処理されます
```

#### 4. フォルダ内を再帰的に処理（サブフォルダ含む）
```bash
python img_resizer.py ./images --recursive
# ./images 以下の全階層の画像が処理され、各画像と同じ階層に出力されます
```

## オプション一覧

| オプション | 短縮形 | 説明 | デフォルト値 |
| :--- | :--- | :--- | :--- |
| `--percent` | `-p` | リサイズ率（%）。0より大きい数値を指定。 | `50` |
| `--prefix` | `-o` | 出力ファイル名の先頭に付く文字列。 | `resized_` |
| `--recursive` | `-r` | フォルダ指定時、サブフォルダも再帰的に探索します。 | OFF |
| `--help` | `-h` | ヘルプメッセージを表示します。 | - |

## 注意事項

*   **出力先**: リサイズされたファイルは、**元ファイルと同じフォルダ**に保存されます。
*   **ファイル名重複**: 出力ファイル名が既に存在する場合、自動的に連番（`resized_img_1.jpg` など）が付与され、上書きは行いません。
*   **JPEGの透過**: 透過情報を持つ画像（PNGなど）をJPEGとして保存しようとする場合（拡張子を無理やり変更した場合など）、背景は白に変換されます。
